(()=>{var e,t={5989:(e,t,n)=>{var o=n(7959);let r;async function a(){try{const e=await fetch("/api/radio/get-queue?limit=9999"),t=await e.json(),n=document.getElementById("song-list");n.innerHTML="",[...t.queues.queue,...t.queues.defaultQueue].forEach((({title:e})=>{const t=document.createElement("div");t.className="song-card",t.innerHTML=`<h3>${e}</h3>`,t.onclick=()=>function(e){document.getElementById("modal-title").textContent=e,document.getElementById("modal-info").textContent=`Details for "${e}". (Metadata like duration/artist not available via API.)`,document.getElementById("modal").style.display="flex"}(e);const i=document.createElement("div");if(i.className="song-actions",r>=3){const t=document.createElement("button");t.textContent="Enqueue",t.onclick=t=>{t.stopPropagation(),async function(e){try{const t=await fetch(`/api/radio/gateway/enqueue?title=${encodeURIComponent(e)}`,{method:"POST"}),n=await t.json();n.error?o.info(n.errorText||"Error enqueuing song."):o.info("Song enqueued.")}catch(e){o.info("Unexpected error.")}}(e)},i.appendChild(t)}if(r>=4){const t=document.createElement("button");t.textContent="Delete",t.onclick=t=>{t.stopPropagation(),async function(e){if(confirm(`Delete "${e}"?`))try{const t=await fetch(`/api/radio/gateway/delete-song?title=${encodeURIComponent(e)}`,{method:"POST"}),n=await t.json();n.error?o.info(n.errorText||"Error deleting song."):(o.info("Song deleted."),a())}catch(e){o.info("Unexpected error.")}}(e)},i.appendChild(t)}t.appendChild(i),n.appendChild(t)}))}catch(e){console.error("Error loading songs:",e),document.getElementById("song-list").innerHTML="<p>Error loading songs. Please try again.</p>"}}window.addTempSong=async function(){const e=document.getElementById("temp-file").files[0],t=document.getElementById("temp-name").value||e.name;if(!t||!e)return o.info("Name and file required.");const n=new FormData;n.append("name",t),n.append("data",e);try{const e=await fetch("/api/radio/gateway/add-temp-song",{method:"POST",body:n}),t=await e.json();t.error?o.error(t.errorText||"Error adding song."):(o.info("Song added to one-time queue."),a())}catch(e){o.info("Unexpected error.")}},window.addPermSong=async function(){const e=document.getElementById("perm-file").files[0],t=document.getElementById("perm-name").value||e?.name,n=document.getElementById("enqueue-check").checked?1:0;if(!t||!e)return o.info("Name and file required.");const r=new FormData;r.append("name",t),r.append("enqueue",n),r.append("data",e);try{const e=await fetch("/api/radio/gateway/add-song",{method:"POST",body:r}),t=await e.json();t.error?o.info(t.errorText||"Error adding song."):(o.info("Song added."),a())}catch(e){o.info("Unexpected error.")}},window.skipSong=async function(){try{const e=await fetch("/api/radio/gateway/skip-song"),t=await e.json();t.error?o.info(t.errorText||"Error skipping song."):o.info("Song skipped.")}catch(e){o.info("Unexpected error.")}},async function(){r=await async function(){try{const e=await fetch("/api/me");return(await e.json()).role}catch(e){return console.error("Error fetching role:",e),0}}(),document.getElementById("role-info").textContent=`Your Role: ${r}`,r<2?document.body.innerHTML="<h1>Access Denied</h1><p>You must be at least Trusted to access this page.</p>":(a(),r>=2&&(document.getElementById("add-temp-form").style.display="block"),r>=3&&(document.getElementById("add-perm-form").style.display="block"),r>=4&&(document.getElementById("skip-section").style.display="block"))}()}},n={};function o(e){var r=n[e];if(void 0!==r)return r.exports;var a=n[e]={exports:{}};return t[e].call(a.exports,a,a.exports,o),a.exports}o.m=t,o.amdD=function(){throw new Error("define cannot be used indirect")},e=[],o.O=(t,n,r,a)=>{if(!n){var i=1/0;for(l=0;l<e.length;l++){for(var[n,r,a]=e[l],d=!0,c=0;c<n.length;c++)(!1&a||i>=a)&&Object.keys(o.O).every((e=>o.O[e](n[c])))?n.splice(c--,1):(d=!1,a<i&&(i=a));if(d){e.splice(l--,1);var s=r();void 0!==s&&(t=s)}}return t}a=a||0;for(var l=e.length;l>0&&e[l-1][2]>a;l--)e[l]=e[l-1];e[l]=[n,r,a]},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={860:0};o.O.j=t=>0===e[t];var t=(t,n)=>{var r,a,[i,d,c]=n,s=0;if(i.some((t=>0!==e[t]))){for(r in d)o.o(d,r)&&(o.m[r]=d[r]);if(c)var l=c(o)}for(t&&t(n);s<i.length;s++)a=i[s],o.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return o.O(l)},n=self.webpackChunkgoroxels_client=self.webpackChunkgoroxels_client||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var r=o.O(void 0,[96],(()=>o(5989)));r=o.O(r)})();